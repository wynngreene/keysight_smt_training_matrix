<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Training Matrix Dashboard</title>

  <!-- Bootstrap 5 CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-light">

  <div class="container py-4">
    <!-- Header -->
    <div class="mb-4">
      <h1 class="h3 mb-1">Training Matrix Dashboard</h1>
      <p class="text-muted mb-0">
        View and update operator training by part.
      </p>
    </div>

    <!-- CSV Upload -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="h5 card-title">1. Load Training CSV</h2>
        <p class="text-muted small mb-2">
          Select the exported training CSV from Excel. The app will build
          a <strong>Parts list</strong> and an <strong>Operators list</strong> from it.
        </p>

        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <input type="file" id="csvInput" accept=".csv" class="form-control" />
          </div>
          <div class="col-md-6">
            <span id="loadStatus" class="text-muted small">
              No file loaded yet.
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters / Search -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="h5 card-title">2. Filters</h2>
        <div class="row g-3">
          <!-- Operator Select -->
          <div class="col-md-4">
            <label for="operatorSelect" class="form-label">Select Operator</label>
            <select id="operatorSelect" class="form-select">
              <option value="">(Load CSV first)</option>
            </select>
          </div>

          <!-- Part Scan / Input -->
          <div class="col-md-4">
            <label for="partScanInput" class="form-label">Scan / Enter Part Number</label>
            <input
              type="text"
              id="partScanInput"
              class="form-control"
              placeholder="Scan or type part number"
            />
          </div>

          <!-- Actions -->
          <div class="col-md-4 d-flex align-items-end">
            <button id="searchPartBtn" class="btn btn-primary me-2">
              Search Part
            </button>
            <button id="clearFiltersBtn" class="btn btn-outline-secondary">
              Clear
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Views -->
    <div class="row g-4 mb-4">
      <!-- By Operator -->
      <div class="col-lg-6">
        <div class="card h-100">
          <div class="card-body">
            <h2 class="h5 card-title mb-2">3A. Training by Operator</h2>
            <p class="text-muted small mb-2" id="operatorViewTitle">
              Select an operator to see their trained parts.
            </p>

            <div class="table-responsive">
              <table class="table table-sm table-striped align-middle" id="operatorTable">
                <thead class="table-light">
                  <tr>
                    <th>Part Number</th>
                    <th>Common Name</th>
                    <th>Family</th>
                    <th>Status</th>
                    <th>Level</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- By Part -->
      <div class="col-lg-6">
        <div class="card h-100">
          <div class="card-body">
            <h2 class="h5 card-title mb-2">3B. Training by Part</h2>
            <div id="partHeader" class="mb-2 text-muted small">
              Scan or enter a part number to see who is trained.
            </div>

            <div class="table-responsive">
              <table class="table table-sm table-striped align-middle" id="partResultTable">
                <thead class="table-light">
                  <tr>
                    <th>Operator</th>
                    <th>Level</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Manage Operators & Training -->
    <div class="card mb-5">
      <div class="card-body">
        <h2 class="h5 card-title mb-3">4. Manage Operators & Training</h2>

        <div class="row g-4">
          <!-- Add Operator -->
          <div class="col-md-4">
            <h3 class="h6">Add New Operator</h3>
            <div class="mb-2">
              <label for="newOperatorName" class="form-label small">Operator Name</label>
              <input
                type="text"
                id="newOperatorName"
                class="form-control"
                placeholder="e.g. Eden"
              />
            </div>
            <button id="addOperatorBtn" class="btn btn-success btn-sm">
              Add Operator
            </button>
            <div id="addOperatorMsg" class="small mt-2 text-muted"></div>
          </div>

          <!-- Set / Update Training -->
          <div class="col-md-8">
            <h3 class="h6">Set / Update Training Level</h3>
            <div class="row g-3 align-items-end">
              <div class="col-md-4">
                <label for="editOperatorSelect" class="form-label small">
                  Operator
                </label>
                <select id="editOperatorSelect" class="form-select">
                  <option value="">(Load CSV first)</option>
                </select>
              </div>

              <div class="col-md-4">
                <label for="editPartInput" class="form-label small">
                  Part Number
                </label>
                <input
                  type="text"
                  id="editPartInput"
                  class="form-control"
                  placeholder="e.g. 1130B-FG"
                />
              </div>

<div class="col-md-4">
  <label for="editLevelSelect" class="form-label small">
    Training Level
  </label>
  <select
    id="editLevelSelect"
    class="form-select form-select-sm"
  >
    <option value="">(Select level)</option>
    <option value="In Process">In Process</option>
    <option value="Trained">Trained</option>
    <option value="Trainer 1">Trainer 1</option>
    <option value="Trainer 2">Trainer 2</option>
  </select>
</div>


              <div class="col-12 mt-2">
                <button id="saveTrainingBtn" class="btn btn-primary btn-sm me-2">
                  Save Training
                </button>
                <span id="saveTrainingMsg" class="small text-muted"></span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>

  <!-- Bootstrap JS (optional, for some components) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Papa Parse for CSV -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- App JS -->
  <script src="app.js"></script>
</body>
</html>
